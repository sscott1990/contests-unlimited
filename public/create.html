<!DOCTYPE html>
<html>
<head>
  <title>Create a Contest</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    form {
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #f9f9f9;
    }
    label {
      display: block;
      margin-top: 15px;
    }
    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
    }
    button {
      margin-top: 20px;
      background-color: #007849;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: not-allowed;
      opacity: 0.6;
    }
    button.enabled {
      cursor: pointer;
      opacity: 1;
    }
    .alert {
      margin-top: 10px;
      color: red;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h1 style="text-align: center;">Submit Your Contest</h1>
  <form id="contestForm" action="/create-contest" method="POST">
    <label>Contest Name:</label>
    <input type="text" name="name" required>

    <label>Description:</label>
    <textarea name="description" rows="5" required></textarea>

    <label>Your Name:</label>
    <input type="text" name="creator" required>

    <label>Email Address:</label>
    <input type="email" name="email" required>

    <label>Select Your Home State:</label>
    <select name="state" id="state" required>
      <option value="">-- Select a State --</option>
      <option value="CA">California</option>
      <option value="NY">New York</option>
      <option value="TX">Texas</option>
      <option value="FL">Florida</option>
      <option value="IL">Illinois</option>
      <option value="NJ">New Jersey</option>
      <option value="WA">Washington</option>
      <!-- Add all other states as needed -->
    </select>
    <div id="stateAlert" class="alert" style="display: none;">Contests for cash are not available in your state.</div>

    <label>
      <input type="checkbox" id="agreeTax" required>
      I agree that I am responsible for my own taxes and operations (not an employee).
    </label>

    <label>
      <input type="checkbox" id="agree18" required>
      I confirm that I am 18 years of age or older.
    </label>

    <label>
      <input type="checkbox" id="agreeFees" required>
      I understand the $50 fee is non-refundable unless denied, and a $10 admin fee applies if I issue a chargeback.
    </label>

    <p><strong>Entry Fee: $50 (non-refundable if approved)</strong></p>

    <button type="submit" id="submitBtn" disabled>Submit Contest</button>
  </form>

  <script>
    const restrictedStates = ['NY', 'WA', 'NJ']; // Add or modify as needed
    const stateSelect = document.getElementById('state');
    const submitBtn = document.getElementById('submitBtn');
    const stateAlert = document.getElementById('stateAlert');

    const checkboxes = ['agreeTax', 'agree18', 'agreeFees'].map(id => document.getElementById(id));

    function updateButtonState() {
      const allChecked = checkboxes.every(cb => cb.checked);
      const state = stateSelect.value;
      const restricted = restrictedStates.includes(state);

      if (restricted) {
        stateAlert.style.display = 'block';
        submitBtn.disabled = true;
        submitBtn.classList.remove('enabled');
        submitBtn.classList.add('disabled');
      } else {
        stateAlert.style.display = 'none';
        if (allChecked && state !== '') {
          submitBtn.disabled = false;
          submitBtn.classList.add('enabled');
        } else {
          submitBtn.disabled = true;
          submitBtn.classList.remove('enabled');
        }
      }
    }

    stateSelect.addEventListener('change', updateButtonState);
    checkboxes.forEach(cb => cb.addEventListener('change', updateButtonState));
  </script>
</body>
</html>
